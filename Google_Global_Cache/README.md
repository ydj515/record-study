# Google Global Cache

## Google Global Cache (GCC)
- 구글이 각국의 통신사에 설치하여 운영하는 캐시 서버

### 탄생 배경
- **유튜브의 성장**으로 인해 각국의 트래픽이 구글 데이터 센터로 쏠리는 상황이 발생  
각국의 통신사가 확보한 해외망에 대한 가용량을 상당히 잡아먹음으로 인해 유튜브 이용자들이 버퍼링 문제가 생김

### 해결책
- 각국의 통신사마다 캐시 서버를 설치것으로해결
- 구글은 각국의 통신사들이 사용하는 해외망을 구축하는데에 상당한 기여를 했었고, 각국의 통신사들이 사용하는 **해외망 중 상당 부분은 구글이 직접 구축**하고 소유하고 있는 자산임
- 유튜브를 통해 전세계의 트래픽을 독점하고 있는 구글의 요청을 통신사들이 거절하기 매우 어려운 상황
- 이러한 배경으로 인해 GGC의 확산은 상당히 빠르게 진행되었고 2017년을 기준으로 전세계 모든 통신사들이 자사 백본망에 GGC를 가지게 됨

### 활용용도
- GGC 초창기에는 유튜브 영상을 임시 저장하고 해당 통신사의 고객에게 버퍼링이 없는 빠른 속도로 스트리밍
- 지금은 GGC의 용도가 확장되어 구글 플레이 스토어, Gmail, 구글 드라이브, 구글 포토 등 구글의 다른 서비스를 제공하는 데에도 쓰이고 있다

### 동작 원리
![1](https://user-images.githubusercontent.com/32935365/65225527-44aa3880-db00-11e9-8f43-de2f976f6b13.png)  

1. **이용자가 유튜브 동영상을 감상할 때에 해당 통신사의 GGC에서 미리 캐싱해 둔 동영상이 존재한다면 구글 데이터 센터가 아닌 통신사에서 직접 동영상을 스트리밍 받는다.**

2. 통신사의 GGC에 이용자가 보고자 하는 동영상이 캐싱되어 있지 않다면, 구글 데이터 센터에서 직접 스트리밍을 받는다.
    - 이 경우, 해외망을 많이 확보한 통신사의 회선에서 상당히 유리하다. 해외망의 규모가 작은 LG U+, SKT의경우 GGC에 없는 유튜브 동영상을 재생하는 경우에 가끔씩 버퍼링이 걸리기도 하는 이유는 바로 이때문이다. 그러나 KT의 경우에는 GGC에 없는 동영상도 자사의 막대한 해외망이 뒷받침되기에 버퍼링이 없이 재생이 된다.

3. 해당 GGC에서는 캐싱되어 있지 않은 동영상을 구글 데이터 센터로부터 다운받아서 캐싱

4. 이용자는 해당 GGC에서 스트리밍을 받음

- 국내 이용자들이 덜 찾게되는 영상들은 GGC에 저장되어도 단기간 내에 지워지게 되며, 조회수가 장기적으로 꾸준히 나오는 동영상들이 GGC에 계속 남을 가능성이 높다.
- 유튜브 라이브 방송도 GGC를 이용한다. 다만, 방송하는 쪽에서는 해외의 구글 데이터 센터로 영상을 전송하고 이용자들은 GGC가 실시간으로 받아오는 10 ~ 20초 지연된 영상을 보게 된다.
- 구글 플레이 스토어의 경우 국내 이용자들이 자주 다운받는 앱들을 GGC에 캐싱시켜서 빠른 속도의 다운로드를 제공

### GCC Install
- Install Introduction : https://support.google.com/interconnect/answer/9058809?hl=en
- Install Guide : https://www.gstatic.com/isp/docs/ggc-installation.pdf
- USB Install Media : https://support.google.com/interconnect/answer/9011634?p=usb&visit_id=637044782388841516-2175561081&rd=1

### 읽어볼 거리
<a href="https://byline.network/2018/07/24-18/">유튜브 캐시 서버와 역차별</a>  
<a href="https://byline.network/2018/07/24-18/">YouTube를 위한 GGC 동작 원리 (1편: KT)</a>  
<a href="https://byline.network/2018/07/24-18/">YouTube를 위한 GCC 동작 원리 (2편: LG U+)</a>  

[이미지 출처]  
http://whiteafrican.com/
