# 이런거 저런거

## 웹서버와 WAS
### 웹 서버
- 클라이언트가 서버에 페이지 요청을 하면 요청을 받아 정적 컨텐츠(html, csss)를 제공하는 서버
- 클라이언트에서 요청이 올 때 가장 앞에서 요청에 대한 처리
- 동적 컨텐츠에 대한 요청이면 WAS에게 클라이턴트의 요청을 전달
- ex) Apache, nginx

### WAS
- 동적 컨텐츠를 제공하기 위해 만들어진 애플리케이션 서버(DB 조회, 로직 처리가 필요한 컨텐츠)
- JSP, Servlet
- 컨테이너, 서블릿 컨테이너라고도 함
- 웹서버로부터 요청이 오면 컨테이너가 받아서 처리
- 컨테이너는 web.xml을 참조하여 해당 서블릿에 대한 쓰레드 생성하고 httpServletRequest와 httpServletResponse 객체를 생성하여 전달
- 컨테이너는 서블릿을 호출
- 호출된 서블릿의 작업을 담당하게 된 쓰레드(위의 web.xml을 참조하여 해당 서블릿에 대해 생성된 스레드)는 doPost()또는 doGet()을 호출한
- 호출된 doPost(), doGet() 메소드는 생성된 동적 페이지를 Response객체에 담아 컨테이너에 전달
- 컨테이너는 전달받은 Response객체를 HTTPResponse형태로 바꿔 웹서버에 전달하고 생성되었던 쓰레드를 종료하고 httpServletRequest, httpServletResponse 객체를 소멸시킴
- ex) Tomcat, Jeus, JBoss

### 비고
- WAS는 정적,동적 처리 둘다 가능하지만 정적처리를 WAS가 하게되면 부하가 많이 걸려서 좋지 않음
- 톰캣(WAS)은 아파치(웹서버)의 기능(웹서비스데몬, Httpd)를 포함
- 웹서버와 WAS를 따로 두지 않는 이유는 톰캣 5.5 이상부터는 httpd의 native모듈을 사용해서 정적파일을 처리하는 기능을 제공하는데 이것이 순수 아파치 Httpd만 사용하는 것과 비교해서 성능이 전혀 떨어지지 않기 때문
- 그럼에도 톰캣앞에 아파치를 두는 이유는 하나의 서버에서 php애플리케이션과 java애플리케이션을 함께 사용하거나, httpd 서버를 간단한 로드밸런싱을 위해서 사용해야 할 때 필요하기 때문


[출처]  
https://jeong-pro.tistory.com/84  